# https://layle.me/posts/using-llvm-with-cmake/
# HUNTER_URL is the URL to the latest source code archive on GitHub
# HUNTER_SHA1 is the hash of the downloaded archive

set(OLD_PROJECT_NAME ${PROJECT_NAME})
set(PROJECT_NAME "")

set(HUNTER_URL "https://github.com/scratchcpp/hunter/archive/ee768cdd2c027b5be346f114e726d4b0c4296de6.zip")
set(HUNTER_SHA1 "4A018750743AC656A859C99C655723EAF68EE038")

set(HUNTER_LLVM_VERSION 19.1.0)
set(HUNTER_LLVM_CMAKE_ARGS
    LLVM_ENABLE_CRASH_OVERRIDES=OFF
    LLVM_ENABLE_ZLIB=OFF
    LLVM_ENABLE_ZSTD=OFF
    LLVM_ENABLE_TERMINFO=OFF
    LLVM_ENABLE_RTTI=ON
    LLVM_BUILD_LLVM_DYLIB=OFF
    LLVM_BUILD_RUNTIME=OFF
    LLVM_BUILD_RUNTIMES=OFF
    LLVM_BUILD_TESTS=OFF
    LLVM_BUILD_TOOLS=OFF
    LLVM_BUILD_UTILS=OFF
    LLVM_INCLUDE_BENCHMARKS=OFF
    LLVM_INCLUDE_DOCS=OFF
    LLVM_INCLUDE_EXAMPLES=OFF
    LLVM_INCLUDE_RUNTIMES=OFF
    LLVM_INCLUDE_TESTS=OFF
    LLVM_INCLUDE_TOOLS=FALSE
    LLVM_INCLUDE_UTILS=OFF
    LLVM_ENABLE_PLUGINS=OFF
    LLVM_ENABLE_BINDINGS=OFF
    LLVM_ENABLE_OCAMLDOC=OFF
    LLVM_BUILD_LLJIT=OFF
    LLVM_BUILD_ORC_JIT=OFF
    LLVM_TOOL_LTO_BUILD=OFF
    LLVM_TOOL_GOLD_BUILD=OFF
    LLVM_TOOL_BUGPOINT_BUILD=OFF
    LLVM_TOOL_CLANG_BUILD=OFF
    LLVM_TOOL_LLDB_BUILD=OFF
    LLVM_TOOL_LLI_BUILD=OFF
    LLVM_TOOL_LLVM_AR_BUILD=OFF
    LLVM_TOOL_LLVM_AS_BUILD=OFF
    LLVM_TOOL_LLVM_BCANALYZER_BUILD=OFF
    LLVM_TOOL_LLVM_CAT_BUILD=OFF
    LLVM_TOOL_LLVM_CFI_VERIFY_BUILD=OFF
    LLVM_TOOL_LLVM_CONFIG_BUILD=OFF
    LLVM_TOOL_LLVM_COV_BUILD=OFF
    LLVM_TOOL_LLVM_CVTRES_BUILD=OFF
    LLVM_TOOL_LLVM_EXTRACT_BUILD=OFF
    LLVM_TOOL_LLVM_LTO_BUILD=OFF
    LLVM_TOOL_LLVM_LINK_BUILD=OFF
    LLVM_TOOL_LLVM_SIZE_BUILD=OFF
    LLVM_TOOL_LLVM_STRINGS_BUILD=OFF
    LLVM_TOOL_LLVM_SYMBOLIZER_BUILD=OFF
    LLVM_TARGETS_TO_BUILD=host
)

if(CMAKE_BUILD_TYPE EQUAL "Debug")
    set(HUNTER_LLVM_CMAKE_ARGS ${HUNTER_LLVM_CMAKE_ARGS} LLVM_ENABLE_ASSERTIONS=ON)
else()
    set(HUNTER_LLVM_CMAKE_ARGS ${HUNTER_LLVM_CMAKE_ARGS} LLVM_ENABLE_ASSERTIONS=OFF)
endif()

set(HUNTER_PACKAGES LLVM)

include(FetchContent)
message(STATUS "Fetching hunter...")
FetchContent_Declare(SetupHunter GIT_REPOSITORY https://github.com/cpp-pm/gate)
FetchContent_MakeAvailable(SetupHunter)

set(PROJECT_NAME ${OLD_PROJECT_NAME})
